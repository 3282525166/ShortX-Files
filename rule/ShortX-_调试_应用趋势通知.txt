{
  "facts": [{
    "@type": "type.googleapis.com/PkgStopRunning",
    "pkgSets": ["User"],
    "customContextDataKey": {
    },
    "id": "F-cd014d47-4b74-4ccd-ac88-21f006e076b7"
  }],
  "actions": [{
    "@type": "type.googleapis.com/ShowDanmu",
    "text": "{pkgName} 趋势了",
    "customContextDataKey": {
    },
    "note": "调试用，快速获知进程停止信息\n点击左侧图标可禁用",
    "id": "A-d48218e4-2a28-467f-a331-24d6782c223f"
  }, {
    "@type": "type.googleapis.com/ShellCommand",
    "command": "# 特别鸣谢：日期部分代码由lanyi233提供\n\n# 日期时间部分\ntime_Y\u003d$(date +%Y)\ntime_m\u003d$(date +%m)\ntime_d\u003d$(date +%d)\ntime_time\u003d$(date +%H:%M:%S)\n\n# 包名\u0026log路径部分\napp\u003d\"{pkgName}\"\nlog\u003d\"/sdcard/Android/趋势.log\"\n\n# mem部分\nmem_total\u003d`top -n 1 | sed -n 2p | awk \u0027{print $2}\u0027`\nmem_used\u003d`top -n 1 | sed -n 2p | awk \u0027{print $4}\u0027`\nmem_free\u003d`top -n 1 | sed -n 2p | awk \u0027{print $6}\u0027`\nmem_y\u003d$(awk -v x\u003d$mem_total -v y\u003d$mem_used \u0027BEGIN{printf \"%.2f\\n\", y/x*100 }\u0027)\nmem_k\u003d$(awk -v x\u003d$mem_y \u0027BEGIN{printf \"%.2f\\n\", 100-x }\u0027)\n\n# swap部分\nswap_total\u003d`top -n 1 | sed -n 3p | awk \u0027{print $2}\u0027`\nswap_used\u003d`top -n 1 | sed -n 3p | awk \u0027{print $4}\u0027`\nswap_free\u003d`top -n 1 | sed -n 3p | awk \u0027{print $6}\u0027`\nswap_y\u003d$(awk -v x\u003d$swap_total -v y\u003d$swap_used \u0027BEGIN{printf \"%.2f\\n\", y/x*100 }\u0027)\nswap_k\u003d$(awk -v x\u003d$swap_y \u0027BEGIN{printf \"%.2f\\n\", 100-x }\u0027)\n\n# 输出log部分\n echo -e \"[${time_Y}年${time_m}月${time_d}日${time_time}] ${app} 趋势了\\n[mem] 总量${mem_total} | 已用${mem_used} ${mem_y}% | 可用${mem_free} ${mem_k}%\\n[swap] 总量${swap_total} | 已用${swap_used} ${swap_y}% | 可用${swap_free} ${swap_k}%\"\u003e\u003e $log\n\nunset time_Y time_m time_ d time_time",
    "singleShot": true,
    "customContextDataKey": {
    },
    "id": "A-9ecc3586-9078-4898-8ab4-7d6aeff7557f"
  }],
  "id": "rule-53c01d0f-c4d6-4ac8-8fc0-35518ba2cf64",
  "lastUpdateTime": "1696520371118",
  "createTime": "1696070951340",
  "author": {
    "name": "ShortX"
  },
  "title": "[调试]应用趋势通知",
  "description": "当应用趋势时发送一条通知",
  "hook": {
  },
  "quit": {
  },
  "versionCode": "1",
  "ruleSetId": "RS-99afceed-e1e8-4633-8337-d33ad43ccf87"
}
###------###
{"type":"rule"}